import{h as O,i as $,_ as j,l as L,K as xe,a as f,b as F,S as ne,g as ye,C as Se,m as U,e as Ce,d as oe,o as ie,f as we}from"./index-b555160e.js";import{r as u}from"./index-4b0af3e2.js";import{R as ze}from"./index-f1f962ae.js";import{o as G}from"./omit-2d4a2b9d.js";import{c as w}from"./index.esm-dc9b15a0.js";import{u as Ae}from"./useMergedState-545be37d.js";import{t as Ne}from"./type-10729977.js";import{c as P}from"./reactNode-7d14b139.js";var Ie=Ne("text","input");function H(a){return!!(a.prefix||a.suffix||a.allowClear)}function Y(a){return!!(a.addonBefore||a.addonAfter)}var se=function(a){O(i,a);var d=$(i);function i(){var r;return j(this,i),r=d.apply(this,arguments),r.containerRef=u.createRef(),r.onInputMouseUp=function(e){var o;if((o=r.containerRef.current)===null||o===void 0?void 0:o.contains(e.target)){var t=r.props.triggerFocus;t==null||t()}},r}return L(i,[{key:"renderClearIcon",value:function(e){var o=this.props,t=o.allowClear,n=o.value,l=o.disabled,s=o.readOnly,c=o.handleReset;if(!t)return null;var p=!l&&!s&&n,v="".concat(e,"-clear-icon");return u.createElement(xe,{onClick:c,className:w(f({},"".concat(v,"-hidden"),!p),v),role:"button"})}},{key:"renderSuffix",value:function(e){var o=this.props,t=o.suffix,n=o.allowClear;return t||n?u.createElement("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),t):null}},{key:"renderLabeledIcon",value:function(e,o){var t,n=this.props,l=n.focused,s=n.value,c=n.prefix,p=n.className,v=n.size,g=n.suffix,b=n.disabled,h=n.allowClear,y=n.direction,C=n.style,z=n.readOnly,R=n.bordered,A=this.renderSuffix(e);if(!H(this.props))return P(o,{value:s});var M=c?u.createElement("span",{className:"".concat(e,"-prefix")},c):null,W=w("".concat(e,"-affix-wrapper"),(t={},f(t,"".concat(e,"-affix-wrapper-focused"),l),f(t,"".concat(e,"-affix-wrapper-disabled"),b),f(t,"".concat(e,"-affix-wrapper-sm"),v==="small"),f(t,"".concat(e,"-affix-wrapper-lg"),v==="large"),f(t,"".concat(e,"-affix-wrapper-input-with-clear-btn"),g&&h&&s),f(t,"".concat(e,"-affix-wrapper-rtl"),y==="rtl"),f(t,"".concat(e,"-affix-wrapper-readonly"),z),f(t,"".concat(e,"-affix-wrapper-borderless"),!R),f(t,"".concat(p),!Y(this.props)&&p),t));return u.createElement("span",{ref:this.containerRef,className:W,style:C,onMouseUp:this.onInputMouseUp},M,P(o,{style:null,value:s,className:ue(e,R,v,b)}),A)}},{key:"renderInputWithLabel",value:function(e,o){var t,n=this.props,l=n.addonBefore,s=n.addonAfter,c=n.style,p=n.size,v=n.className,g=n.direction;if(!Y(this.props))return o;var b="".concat(e,"-group"),h="".concat(b,"-addon"),y=l?u.createElement("span",{className:h},l):null,C=s?u.createElement("span",{className:h},s):null,z=w("".concat(e,"-wrapper"),b,f({},"".concat(b,"-rtl"),g==="rtl")),R=w("".concat(e,"-group-wrapper"),(t={},f(t,"".concat(e,"-group-wrapper-sm"),p==="small"),f(t,"".concat(e,"-group-wrapper-lg"),p==="large"),f(t,"".concat(e,"-group-wrapper-rtl"),g==="rtl"),t),v);return u.createElement("span",{className:R,style:c},u.createElement("span",{className:z},y,P(o,{style:null}),C))}},{key:"renderTextAreaWithClearIcon",value:function(e,o){var t,n=this.props,l=n.value,s=n.allowClear,c=n.className,p=n.style,v=n.direction,g=n.bordered;if(!s)return P(o,{value:l});var b=w("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),(t={},f(t,"".concat(e,"-affix-wrapper-rtl"),v==="rtl"),f(t,"".concat(e,"-affix-wrapper-borderless"),!g),f(t,"".concat(c),!Y(this.props)&&c),t));return u.createElement("span",{className:b,style:p},P(o,{style:null,value:l}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,o=e.prefixCls,t=e.inputType,n=e.element;return t===Ie[0]?this.renderTextAreaWithClearIcon(o,n):this.renderInputWithLabel(o,this.renderLabeledIcon(o,n))}}]),i}(u.Component);function le(a){return typeof a=="undefined"||a===null?"":a}function V(a,d,i,r){if(!!i){var e=d,o=a.value;if(d.type==="click"){e=Object.create(d),e.target=a,e.currentTarget=a,a.value="",i(e),a.value=o;return}if(r!==void 0){e=Object.create(d),e.target=a,e.currentTarget=a,a.value=r,i(e);return}i(e)}}function ue(a,d,i,r,e){var o;return w(a,(o={},f(o,"".concat(a,"-sm"),i==="small"),f(o,"".concat(a,"-lg"),i==="large"),f(o,"".concat(a,"-disabled"),r),f(o,"".concat(a,"-rtl"),e==="rtl"),f(o,"".concat(a,"-borderless"),!d),o))}function ce(a,d){if(!!a){a.focus(d);var i=d||{},r=i.cursor;if(r){var e=a.value.length;switch(r){case"start":a.setSelectionRange(0,0);break;case"end":a.setSelectionRange(e,e);break;default:a.setSelectionRange(0,e)}}}}var de=function(a){O(i,a);var d=$(i);function i(r){var e;j(this,i),e=d.call(this,r),e.direction="ltr",e.focus=function(t){ce(e.input,t)},e.saveClearableInput=function(t){e.clearableInput=t},e.saveInput=function(t){e.input=t},e.onFocus=function(t){var n=e.props.onFocus;e.setState({focused:!0},e.clearPasswordValueAttribute),n==null||n(t)},e.onBlur=function(t){var n=e.props.onBlur;e.setState({focused:!1},e.clearPasswordValueAttribute),n==null||n(t)},e.handleReset=function(t){e.setValue("",function(){e.focus()}),V(e.input,t,e.props.onChange)},e.renderInput=function(t,n,l){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=e.props,p=c.className,v=c.addonBefore,g=c.addonAfter,b=c.size,h=c.disabled,y=G(e.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType","bordered"]);return u.createElement("input",F({autoComplete:s.autoComplete},y,{onChange:e.handleChange,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:e.handleKeyDown,className:w(ue(t,l,b||n,h,e.direction),f({},p,p&&!v&&!g)),ref:e.saveInput}))},e.clearPasswordValueAttribute=function(){e.removePasswordTimeout=setTimeout(function(){e.input&&e.input.getAttribute("type")==="password"&&e.input.hasAttribute("value")&&e.input.removeAttribute("value")})},e.handleChange=function(t){e.setValue(t.target.value,e.clearPasswordValueAttribute),V(e.input,t,e.props.onChange)},e.handleKeyDown=function(t){var n=e.props,l=n.onPressEnter,s=n.onKeyDown;l&&t.keyCode===13&&l(t),s==null||s(t)},e.renderComponent=function(t){var n=t.getPrefixCls,l=t.direction,s=t.input,c=e.state,p=c.value,v=c.focused,g=e.props,b=g.prefixCls,h=g.bordered,y=h===void 0?!0:h,C=n("input",b);return e.direction=l,u.createElement(ne.Consumer,null,function(z){return u.createElement(se,F({size:z},e.props,{prefixCls:C,inputType:"input",value:le(p),element:e.renderInput(C,z,y,s),handleReset:e.handleReset,ref:e.saveClearableInput,direction:l,focused:v,triggerFocus:e.focus,bordered:y}))})};var o=typeof r.value=="undefined"?r.defaultValue:r.value;return e.state={value:o,focused:!1,prevValue:r.value},e}return L(i,[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return H(e)!==H(this.props)&&ye(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,o,t){this.input.setSelectionRange(e,o,t)}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,o){this.props.value===void 0?this.setState({value:e},o):o==null||o()}},{key:"render",value:function(){return u.createElement(Se,null,this.renderComponent)}}],[{key:"getDerivedStateFromProps",value:function(e,o){var t=o.prevValue,n={prevValue:e.value};return(e.value!==void 0||t!==e.value)&&(n.value=e.value),n}}]),i}(u.Component);de.defaultProps={type:"text"};var Ee=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,Re=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],Z={},S;function _e(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=a.getAttribute("id")||a.getAttribute("data-reactid")||a.getAttribute("name");if(d&&Z[i])return Z[i];var r=window.getComputedStyle(a),e=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),t=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),n=Re.map(function(s){return"".concat(s,":").concat(r.getPropertyValue(s))}).join(";"),l={sizingStyle:n,paddingSize:o,borderSize:t,boxSizing:e};return d&&i&&(Z[i]=l),l}function Te(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;S||(S=document.createElement("textarea"),S.setAttribute("tab-index","-1"),S.setAttribute("aria-hidden","true"),document.body.appendChild(S)),a.getAttribute("wrap")?S.setAttribute("wrap",a.getAttribute("wrap")):S.removeAttribute("wrap");var e=_e(a,d),o=e.paddingSize,t=e.borderSize,n=e.boxSizing,l=e.sizingStyle;S.setAttribute("style","".concat(l,";").concat(Ee)),S.value=a.value||a.placeholder||"";var s=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,p=S.scrollHeight,v;if(n==="border-box"?p+=t:n==="content-box"&&(p-=o),i!==null||r!==null){S.value=" ";var g=S.scrollHeight-o;i!==null&&(s=g*i,n==="border-box"&&(s=s+o+t),p=Math.max(s,p)),r!==null&&(c=g*r,n==="border-box"&&(c=c+o+t),v=p>c?"":"hidden",p=Math.min(c,p))}return{height:p,minHeight:s,maxHeight:c,overflowY:v,resize:"none"}}var E;(function(a){a[a.NONE=0]="NONE",a[a.RESIZING=1]="RESIZING",a[a.RESIZED=2]="RESIZED"})(E||(E={}));var Fe=function(a){O(i,a);var d=$(i);function i(r){var e;return j(this,i),e=d.call(this,r),e.saveTextArea=function(o){e.textArea=o},e.handleResize=function(o){var t=e.state.resizeStatus,n=e.props,l=n.autoSize,s=n.onResize;t===E.NONE&&(typeof s=="function"&&s(o),l&&e.resizeOnNextFrame())},e.resizeOnNextFrame=function(){cancelAnimationFrame(e.nextFrameActionId),e.nextFrameActionId=requestAnimationFrame(e.resizeTextarea)},e.resizeTextarea=function(){var o=e.props.autoSize;if(!(!o||!e.textArea)){var t=o.minRows,n=o.maxRows,l=Te(e.textArea,!1,t,n);e.setState({textareaStyles:l,resizeStatus:E.RESIZING},function(){cancelAnimationFrame(e.resizeFrameId),e.resizeFrameId=requestAnimationFrame(function(){e.setState({resizeStatus:E.RESIZED},function(){e.resizeFrameId=requestAnimationFrame(function(){e.setState({resizeStatus:E.NONE}),e.fixFirefoxAutoScroll()})})})})}},e.renderTextArea=function(){var o=e.props,t=o.prefixCls,n=t===void 0?"rc-textarea":t,l=o.autoSize,s=o.onResize,c=o.className,p=o.disabled,v=e.state,g=v.textareaStyles,b=v.resizeStatus,h=G(e.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),y=w(n,c,f({},"".concat(n,"-disabled"),p));"value"in h&&(h.value=h.value||"");var C=U(U(U({},e.props.style),g),b===E.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return u.createElement(ze,{onResize:e.handleResize,disabled:!(l||s)},u.createElement("textarea",F({},h,{className:y,style:C,ref:e.saveTextArea})))},e.state={textareaStyles:{},resizeStatus:E.NONE},e}return L(i,[{key:"componentDidMount",value:function(){this.resizeTextarea()}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,o=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,o)}}catch(t){}}},{key:"render",value:function(){return this.renderTextArea()}}]),i}(u.Component),Pe=function(a){O(i,a);var d=$(i);function i(r){var e;j(this,i),e=d.call(this,r),e.focus=function(){e.resizableTextArea.textArea.focus()},e.saveTextArea=function(t){e.resizableTextArea=t},e.handleChange=function(t){var n=e.props.onChange;e.setValue(t.target.value,function(){e.resizableTextArea.resizeTextarea()}),n&&n(t)},e.handleKeyDown=function(t){var n=e.props,l=n.onPressEnter,s=n.onKeyDown;t.keyCode===13&&l&&l(t),s&&s(t)};var o=typeof r.value=="undefined"||r.value===null?r.defaultValue:r.value;return e.state={value:o},e}return L(i,[{key:"setValue",value:function(e,o){"value"in this.props||this.setState({value:e},o)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return u.createElement(Fe,F({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),i}(u.Component),Ve=function(a,d){var i={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&d.indexOf(r)<0&&(i[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,r=Object.getOwnPropertySymbols(a);e<r.length;e++)d.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(a,r[e])&&(i[r[e]]=a[r[e]]);return i};function q(a,d){return ie(a||"").slice(0,d).join("")}var ke=u.forwardRef(function(a,d){var i,r=a.prefixCls,e=a.bordered,o=e===void 0?!0:e,t=a.showCount,n=t===void 0?!1:t,l=a.maxLength,s=a.className,c=a.style,p=a.size,v=a.onCompositionStart,g=a.onCompositionEnd,b=a.onChange,h=Ve(a,["prefixCls","bordered","showCount","maxLength","className","style","size","onCompositionStart","onCompositionEnd","onChange"]),y=u.useContext(Ce),C=y.getPrefixCls,z=y.direction,R=u.useContext(ne),A=u.useRef(null),M=u.useRef(null),W=u.useState(!1),X=oe(W,2),Q=X[0],J=X[1],fe=Ae(h.defaultValue,{value:h.value}),ee=oe(fe,2),te=ee[0],pe=ee[1],B=function(x,m){h.value===void 0&&(pe(x),m==null||m())},k=Number(l)>0,ve=function(x){J(!0),v==null||v(x)},me=function(x){J(!1);var m=x.currentTarget.value;k&&(m=q(m,l)),m!==te&&(B(m),V(x.currentTarget,x,b,m)),g==null||g(x)},he=function(x){var m=x.target.value;!Q&&k&&(m=q(m,l)),B(m),V(x.currentTarget,x,b,m)},ge=function(x){var m,_;B("",function(){var T;(T=A.current)===null||T===void 0||T.focus()}),V((_=(m=A.current)===null||m===void 0?void 0:m.resizableTextArea)===null||_===void 0?void 0:_.textArea,x,b)},N=C("input",r);u.useImperativeHandle(d,function(){var I;return{resizableTextArea:(I=A.current)===null||I===void 0?void 0:I.resizableTextArea,focus:function(m){var _,T;ce((T=(_=A.current)===null||_===void 0?void 0:_.resizableTextArea)===null||T===void 0?void 0:T.textArea,m)},blur:function(){var m;return(m=A.current)===null||m===void 0?void 0:m.blur()}}});var be=u.createElement(Pe,F({},G(h,["allowClear"]),{className:w((i={},f(i,"".concat(N,"-borderless"),!o),f(i,s,s&&!n),f(i,"".concat(N,"-sm"),R==="small"||p==="small"),f(i,"".concat(N,"-lg"),R==="large"||p==="large"),i)),style:n?void 0:c,prefixCls:N,onCompositionStart:ve,onChange:he,onCompositionEnd:me,ref:A})),D=le(te);!Q&&k&&(h.value===null||h.value===void 0)&&(D=q(D,l));var ae=u.createElement(se,F({},h,{prefixCls:N,direction:z,inputType:"text",value:D,element:be,handleReset:ge,ref:M,bordered:o}));if(n){var re=ie(D).length,K="";return we(n)==="object"?K=n.formatter({count:re,maxLength:l}):K="".concat(re).concat(k?" / ".concat(l):""),u.createElement("div",{className:w("".concat(N,"-textarea"),f({},"".concat(N,"-textarea-rtl"),z==="rtl"),"".concat(N,"-textarea-show-count"),s),style:c,"data-count":K},ae)}return ae});export{de as I,ke as T};
