import{m as S,c as le,b as F,d as V,k as Oe,f as vt,w as X,v as ht,x as De,n as mt,h as gt,i as wt,_ as yt,y as bt,j as Tt,l as Ct,s as Pt}from"./index-b555160e.js";import{r as f}from"./index-4b0af3e2.js";import{r as ce}from"./index-6302b3fe.js";import{c as Z,P as Mt}from"./Portal-3708f214.js";import{c as J}from"./index.esm-dc9b15a0.js";import{i as xt}from"./ResizeObserver.es-beade628.js";var Ne=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4)))};function U(e,i,t,o){var r=ce.unstable_batchedUpdates?function(n){ce.unstable_batchedUpdates(t,n)}:t;return e.addEventListener&&e.addEventListener(i,r,o),{remove:function(){e.removeEventListener&&e.removeEventListener(i,r)}}}function St(e,i,t){return t?e[0]===i[0]:e[0]===i[0]&&e[1]===i[1]}function Et(e,i,t){var o=e[i]||{};return S(S({},o),t)}function kt(e,i,t,o){for(var r=t.points,s=Object.keys(e),n=0;n<s.length;n+=1){var u=s[n];if(St(e[u].points,r,o))return"".concat(i,"-placement-").concat(u)}return""}function Re(e){var i=e.prefixCls,t=e.motion,o=e.animation,r=e.transitionName;return t||(o?{motionName:"".concat(i,"-").concat(o)}:r?{motionName:r}:null)}function Ot(e){var i=e.prefixCls,t=e.visible,o=e.zIndex,r=e.mask,s=e.maskMotion,n=e.maskAnimation,u=e.maskTransitionName;if(!r)return null;var a={};return(s||u||n)&&(a=S({motionAppear:!0},Re({motion:s,prefixCls:i,transitionName:u,animation:n}))),f.createElement(le,F({},a,{visible:t,removeOnLeave:!0}),function(l){var v=l.className;return f.createElement("div",{style:{zIndex:o},className:J("".concat(i,"-mask"),v)})})}var Dt=function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var i=e.getBBox();if(i.width||i.height)return!0}if(e.getBoundingClientRect){var t=e.getBoundingClientRect();if(t.width||t.height)return!0}return!1};function Ae(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Ve(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Ae(Object(t),!0).forEach(function(o){Nt(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function ee(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ee=function(i){return typeof i}:ee=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ee(e)}function Nt(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var q,Rt={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function te(){if(q!==void 0)return q;q="";var e=document.createElement("p").style,i="Transform";for(var t in Rt)t+i in e&&(q=t);return q}function He(){return te()?"".concat(te(),"TransitionProperty"):"transitionProperty"}function ne(){return te()?"".concat(te(),"Transform"):"transform"}function We(e,i){var t=He();t&&(e.style[t]=i,t!=="transitionProperty"&&(e.style.transitionProperty=i))}function fe(e,i){var t=ne();t&&(e.style[t]=i,t!=="transform"&&(e.style.transform=i))}function At(e){return e.style.transitionProperty||e.style[He()]}function Vt(e){var i=window.getComputedStyle(e,null),t=i.getPropertyValue("transform")||i.getPropertyValue(ne());if(t&&t!=="none"){var o=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(o[12]||o[4],0),y:parseFloat(o[13]||o[5],0)}}return{x:0,y:0}}var Ht=/matrix\((.*)\)/,Wt=/matrix3d\((.*)\)/;function Lt(e,i){var t=window.getComputedStyle(e,null),o=t.getPropertyValue("transform")||t.getPropertyValue(ne());if(o&&o!=="none"){var r,s=o.match(Ht);if(s)s=s[1],r=s.split(",").map(function(u){return parseFloat(u,10)}),r[4]=i.x,r[5]=i.y,fe(e,"matrix(".concat(r.join(","),")"));else{var n=o.match(Wt)[1];r=n.split(",").map(function(u){return parseFloat(u,10)}),r[12]=i.x,r[13]=i.y,fe(e,"matrix3d(".concat(r.join(","),")"))}}else fe(e,"translateX(".concat(i.x,"px) translateY(").concat(i.y,"px) translateZ(0)"))}var Bt=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,G;function Le(e){var i=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=i}function j(e,i,t){var o=t;if(ee(i)==="object"){for(var r in i)i.hasOwnProperty(r)&&j(e,r,i[r]);return}if(typeof o!="undefined"){typeof o=="number"&&(o="".concat(o,"px")),e.style[i]=o;return}return G(e,i)}function zt(e){var i,t,o,r=e.ownerDocument,s=r.body,n=r&&r.documentElement;return i=e.getBoundingClientRect(),t=i.left,o=i.top,t-=n.clientLeft||s.clientLeft||0,o-=n.clientTop||s.clientTop||0,{left:t,top:o}}function Be(e,i){var t=e["page".concat(i?"Y":"X","Offset")],o="scroll".concat(i?"Top":"Left");if(typeof t!="number"){var r=e.document;t=r.documentElement[o],typeof t!="number"&&(t=r.body[o])}return t}function ze(e){return Be(e)}function _e(e){return Be(e,!0)}function K(e){var i=zt(e),t=e.ownerDocument,o=t.defaultView||t.parentWindow;return i.left+=ze(o),i.top+=_e(o),i}function pe(e){return e!=null&&e==e.window}function Ie(e){return pe(e)?e.document:e.nodeType===9?e:e.ownerDocument}function _t(e,i,t){var o=t,r="",s=Ie(e);return o=o||s.defaultView.getComputedStyle(e,null),o&&(r=o.getPropertyValue(i)||o[i]),r}var It=new RegExp("^(".concat(Bt,")(?!px)[a-z%]+$"),"i"),Ft=/^(top|right|bottom|left)$/,de="currentStyle",ve="runtimeStyle",_="left",Xt="px";function jt(e,i){var t=e[de]&&e[de][i];if(It.test(t)&&!Ft.test(i)){var o=e.style,r=o[_],s=e[ve][_];e[ve][_]=e[de][_],o[_]=i==="fontSize"?"1em":t||0,t=o.pixelLeft+Xt,o[_]=r,e[ve][_]=s}return t===""?"auto":t}typeof window!="undefined"&&(G=window.getComputedStyle?_t:jt);function ie(e,i){return e==="left"?i.useCssRight?"right":e:i.useCssBottom?"bottom":e}function Fe(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function Xe(e,i,t){j(e,"position")==="static"&&(e.style.position="relative");var o=-999,r=-999,s=ie("left",t),n=ie("top",t),u=Fe(s),a=Fe(n);s!=="left"&&(o=999),n!=="top"&&(r=999);var l="",v=K(e);("left"in i||"top"in i)&&(l=At(e)||"",We(e,"none")),"left"in i&&(e.style[u]="",e.style[s]="".concat(o,"px")),"top"in i&&(e.style[a]="",e.style[n]="".concat(r,"px")),Le(e);var h=K(e),p={};for(var c in i)if(i.hasOwnProperty(c)){var d=ie(c,t),g=c==="left"?o:r,T=v[c]-h[c];d===c?p[d]=g+T:p[d]=g-T}j(e,p),Le(e),("left"in i||"top"in i)&&We(e,l);var w={};for(var y in i)if(i.hasOwnProperty(y)){var b=ie(y,t),P=i[y]-v[y];y===b?w[b]=p[b]+P:w[b]=p[b]-P}j(e,w)}function Yt(e,i){var t=K(e),o=Vt(e),r={x:o.x,y:o.y};"left"in i&&(r.x=o.x+i.left-t.left),"top"in i&&(r.y=o.y+i.top-t.top),Lt(e,r)}function $t(e,i,t){if(t.ignoreShake){var o=K(e),r=o.left.toFixed(0),s=o.top.toFixed(0),n=i.left.toFixed(0),u=i.top.toFixed(0);if(r===n&&s===u)return}t.useCssRight||t.useCssBottom?Xe(e,i,t):t.useCssTransform&&ne()in document.body.style?Yt(e,i):Xe(e,i,t)}function he(e,i){for(var t=0;t<e.length;t++)i(e[t])}function je(e){return G(e,"boxSizing")==="border-box"}var Ut=["margin","border","padding"],me=-1,qt=2,ge=1,Gt=0;function Kt(e,i,t){var o={},r=e.style,s;for(s in i)i.hasOwnProperty(s)&&(o[s]=r[s],r[s]=i[s]);t.call(e);for(s in i)i.hasOwnProperty(s)&&(r[s]=o[s])}function Q(e,i,t){var o=0,r,s,n;for(s=0;s<i.length;s++)if(r=i[s],r)for(n=0;n<t.length;n++){var u=void 0;r==="border"?u="".concat(r).concat(t[n],"Width"):u=r+t[n],o+=parseFloat(G(e,u))||0}return o}var R={getParent:function(i){var t=i;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};he(["Width","Height"],function(e){R["doc".concat(e)]=function(i){var t=i.document;return Math.max(t.documentElement["scroll".concat(e)],t.body["scroll".concat(e)],R["viewport".concat(e)](t))},R["viewport".concat(e)]=function(i){var t="client".concat(e),o=i.document,r=o.body,s=o.documentElement,n=s[t];return o.compatMode==="CSS1Compat"&&n||r&&r[t]||n}});function Ye(e,i,t){var o=t;if(pe(e))return i==="width"?R.viewportWidth(e):R.viewportHeight(e);if(e.nodeType===9)return i==="width"?R.docWidth(e):R.docHeight(e);var r=i==="width"?["Left","Right"]:["Top","Bottom"],s=i==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height,n=je(e),u=0;(s==null||s<=0)&&(s=void 0,u=G(e,i),(u==null||Number(u)<0)&&(u=e.style[i]||0),u=parseFloat(u)||0),o===void 0&&(o=n?ge:me);var a=s!==void 0||n,l=s||u;return o===me?a?l-Q(e,["border","padding"],r):u:a?o===ge?l:l+(o===qt?-Q(e,["border"],r):Q(e,["margin"],r)):u+Q(e,Ut.slice(o),r)}var Qt={position:"absolute",visibility:"hidden",display:"block"};function $e(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];var o,r=i[0];return r.offsetWidth!==0?o=Ye.apply(void 0,i):Kt(r,Qt,function(){o=Ye.apply(void 0,i)}),o}he(["width","height"],function(e){var i=e.charAt(0).toUpperCase()+e.slice(1);R["outer".concat(i)]=function(o,r){return o&&$e(o,e,r?Gt:ge)};var t=e==="width"?["Left","Right"]:["Top","Bottom"];R[e]=function(o,r){var s=r;if(s!==void 0){if(o){var n=je(o);return n&&(s+=Q(o,["padding","border"],t)),j(o,e,s)}return}return o&&$e(o,e,me)}});function Ue(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);return e}var m={getWindow:function(i){if(i&&i.document&&i.setTimeout)return i;var t=i.ownerDocument||i;return t.defaultView||t.parentWindow},getDocument:Ie,offset:function(i,t,o){if(typeof t!="undefined")$t(i,t,o||{});else return K(i)},isWindow:pe,each:he,css:j,clone:function(i){var t,o={};for(t in i)i.hasOwnProperty(t)&&(o[t]=i[t]);var r=i.overflow;if(r)for(t in i)i.hasOwnProperty(t)&&(o.overflow[t]=i.overflow[t]);return o},mix:Ue,getWindowScrollLeft:function(i){return ze(i)},getWindowScrollTop:function(i){return _e(i)},merge:function(){for(var i={},t=0;t<arguments.length;t++)m.mix(i,t<0||arguments.length<=t?void 0:arguments[t]);return i},viewportWidth:0,viewportHeight:0};Ue(m,R);var we=m.getParent;function ye(e){if(m.isWindow(e)||e.nodeType===9)return null;var i=m.getDocument(e),t=i.body,o,r=m.css(e,"position"),s=r==="fixed"||r==="absolute";if(!s)return e.nodeName.toLowerCase()==="html"?null:we(e);for(o=we(e);o&&o!==t&&o.nodeType!==9;o=we(o))if(r=m.css(o,"position"),r!=="static")return o;return null}var qe=m.getParent;function Zt(e){if(m.isWindow(e)||e.nodeType===9)return!1;var i=m.getDocument(e),t=i.body,o=null;for(o=qe(e);o&&o!==t;o=qe(o)){var r=m.css(o,"position");if(r==="fixed")return!0}return!1}function be(e,i){for(var t={left:0,right:Infinity,top:0,bottom:Infinity},o=ye(e),r=m.getDocument(e),s=r.defaultView||r.parentWindow,n=r.body,u=r.documentElement;o;){if((navigator.userAgent.indexOf("MSIE")===-1||o.clientWidth!==0)&&o!==n&&o!==u&&m.css(o,"overflow")!=="visible"){var a=m.offset(o);a.left+=o.clientLeft,a.top+=o.clientTop,t.top=Math.max(t.top,a.top),t.right=Math.min(t.right,a.left+o.clientWidth),t.bottom=Math.min(t.bottom,a.top+o.clientHeight),t.left=Math.max(t.left,a.left)}else if(o===n||o===u)break;o=ye(o)}var l=null;if(!m.isWindow(e)&&e.nodeType!==9){l=e.style.position;var v=m.css(e,"position");v==="absolute"&&(e.style.position="fixed")}var h=m.getWindowScrollLeft(s),p=m.getWindowScrollTop(s),c=m.viewportWidth(s),d=m.viewportHeight(s),g=u.scrollWidth,T=u.scrollHeight,w=window.getComputedStyle(n);if(w.overflowX==="hidden"&&(g=s.innerWidth),w.overflowY==="hidden"&&(T=s.innerHeight),e.style&&(e.style.position=l),i||Zt(e))t.left=Math.max(t.left,h),t.top=Math.max(t.top,p),t.right=Math.min(t.right,h+c),t.bottom=Math.min(t.bottom,p+d);else{var y=Math.max(g,h+c);t.right=Math.min(t.right,y);var b=Math.max(T,p+d);t.bottom=Math.min(t.bottom,b)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function Jt(e,i,t,o){var r=m.clone(e),s={width:i.width,height:i.height};return o.adjustX&&r.left<t.left&&(r.left=t.left),o.resizeWidth&&r.left>=t.left&&r.left+s.width>t.right&&(s.width-=r.left+s.width-t.right),o.adjustX&&r.left+s.width>t.right&&(r.left=Math.max(t.right-s.width,t.left)),o.adjustY&&r.top<t.top&&(r.top=t.top),o.resizeHeight&&r.top>=t.top&&r.top+s.height>t.bottom&&(s.height-=r.top+s.height-t.bottom),o.adjustY&&r.top+s.height>t.bottom&&(r.top=Math.max(t.bottom-s.height,t.top)),m.mix(r,s)}function Te(e){var i,t,o;if(!m.isWindow(e)&&e.nodeType!==9)i=m.offset(e),t=m.outerWidth(e),o=m.outerHeight(e);else{var r=m.getWindow(e);i={left:m.getWindowScrollLeft(r),top:m.getWindowScrollTop(r)},t=m.viewportWidth(r),o=m.viewportHeight(r)}return i.width=t,i.height=o,i}function Ge(e,i){var t=i.charAt(0),o=i.charAt(1),r=e.width,s=e.height,n=e.left,u=e.top;return t==="c"?u+=s/2:t==="b"&&(u+=s),o==="c"?n+=r/2:o==="r"&&(n+=r),{left:n,top:u}}function oe(e,i,t,o,r){var s=Ge(i,t[1]),n=Ge(e,t[0]),u=[n.left-s.left,n.top-s.top];return{left:Math.round(e.left-u[0]+o[0]-r[0]),top:Math.round(e.top-u[1]+o[1]-r[1])}}function Ke(e,i,t){return e.left<t.left||e.left+i.width>t.right}function Qe(e,i,t){return e.top<t.top||e.top+i.height>t.bottom}function en(e,i,t){return e.left>t.right||e.left+i.width<t.left}function tn(e,i,t){return e.top>t.bottom||e.top+i.height<t.top}function re(e,i,t){var o=[];return m.each(e,function(r){o.push(r.replace(i,function(s){return t[s]}))}),o}function ae(e,i){return e[i]=-e[i],e}function Ze(e,i){var t;return/%$/.test(e)?t=parseInt(e.substring(0,e.length-1),10)/100*i:t=parseInt(e,10),t||0}function Je(e,i){e[0]=Ze(e[0],i.width),e[1]=Ze(e[1],i.height)}function et(e,i,t,o){var r=t.points,s=t.offset||[0,0],n=t.targetOffset||[0,0],u=t.overflow,a=t.source||e;s=[].concat(s),n=[].concat(n),u=u||{};var l={},v=0,h=!!(u&&u.alwaysByViewport),p=be(a,h),c=Te(a);Je(s,c),Je(n,i);var d=oe(c,i,r,s,n),g=m.merge(c,d);if(p&&(u.adjustX||u.adjustY)&&o){if(u.adjustX&&Ke(d,c,p)){var T=re(r,/[lr]/gi,{l:"r",r:"l"}),w=ae(s,0),y=ae(n,0),b=oe(c,i,T,w,y);en(b,c,p)||(v=1,r=T,s=w,n=y)}if(u.adjustY&&Qe(d,c,p)){var P=re(r,/[tb]/gi,{t:"b",b:"t"}),M=ae(s,1),C=ae(n,1),O=oe(c,i,P,M,C);tn(O,c,p)||(v=1,r=P,s=M,n=C)}v&&(d=oe(c,i,r,s,n),m.mix(g,d));var E=Ke(d,c,p),D=Qe(d,c,p);if(E||D){var k=r;E&&(k=re(r,/[lr]/gi,{l:"r",r:"l"})),D&&(k=re(r,/[tb]/gi,{t:"b",b:"t"})),r=k,s=t.offset||[0,0],n=t.targetOffset||[0,0]}l.adjustX=u.adjustX&&E,l.adjustY=u.adjustY&&D,(l.adjustX||l.adjustY)&&(g=Jt(d,c,p,l))}return g.width!==c.width&&m.css(a,"width",m.width(a)+g.width-c.width),g.height!==c.height&&m.css(a,"height",m.height(a)+g.height-c.height),m.offset(a,{left:g.left,top:g.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:r,offset:s,targetOffset:n,overflow:l}}function nn(e,i){var t=be(e,i),o=Te(e);return!t||o.left+o.width<=t.left||o.top+o.height<=t.top||o.left>=t.right||o.top>=t.bottom}function Ce(e,i,t){var o=t.target||i,r=Te(o),s=!nn(o,t.overflow&&t.overflow.alwaysByViewport);return et(e,r,t,s)}Ce.__getOffsetParent=ye,Ce.__getVisibleRectForElement=be;function on(e,i,t){var o,r,s=m.getDocument(e),n=s.defaultView||s.parentWindow,u=m.getWindowScrollLeft(n),a=m.getWindowScrollTop(n),l=m.viewportWidth(n),v=m.viewportHeight(n);"pageX"in i?o=i.pageX:o=u+i.clientX,"pageY"in i?r=i.pageY:r=a+i.clientY;var h={left:o,top:r,width:0,height:0},p=o>=0&&o<=u+l&&r>=0&&r<=a+v,c=[t.points[0],"cc"];return et(e,h,Ve(Ve({},t),{},{points:c}),p)}function rn(e,i){return e===i?!0:!e||!i?!1:"pageX"in i&&"pageY"in i?e.pageX===i.pageX&&e.pageY===i.pageY:"clientX"in i&&"clientY"in i?e.clientX===i.clientX&&e.clientY===i.clientY:!1}function an(e,i){e!==document.activeElement&&Z(i,e)&&typeof e.focus=="function"&&e.focus()}function tt(e,i){var t=null,o=null;function r(n){var u=V(n,1),a=u[0].target;if(!!document.documentElement.contains(a)){var l=a.getBoundingClientRect(),v=l.width,h=l.height,p=Math.floor(v),c=Math.floor(h);(t!==p||o!==c)&&Promise.resolve().then(function(){i({width:p,height:c})}),t=p,o=c}}var s=new xt(r);return e&&s.observe(e),function(){s.disconnect()}}var sn=function(e,i){var t=f.useRef(!1),o=f.useRef(null);function r(){window.clearTimeout(o.current)}function s(n){if(!t.current||n===!0){if(e()===!1)return;t.current=!0,r(),o.current=window.setTimeout(function(){t.current=!1},i)}else r(),o.current=window.setTimeout(function(){t.current=!1,s()},i)}return[s,function(){t.current=!1,r()}]};function nt(e){return typeof e!="function"?null:e()}function it(e){return vt(e)!=="object"||!e?null:e}var un=function(i,t){var o=i.children,r=i.disabled,s=i.target,n=i.align,u=i.onAlign,a=i.monitorWindowResize,l=i.monitorBufferTime,v=l===void 0?0:l,h=f.useRef({}),p=f.useRef(),c=f.Children.only(o),d=f.useRef({});d.current.disabled=r,d.current.target=s,d.current.onAlign=u;var g=sn(function(){var C=d.current,O=C.disabled,E=C.target,D=C.onAlign;if(!O&&E){var k=p.current,N,H=nt(E),B=it(E);h.current.element=H,h.current.point=B;var Y=document,A=Y.activeElement;return H&&Dt(H)?N=Ce(k,H,n):B&&(N=on(k,B,n)),an(A,k),D&&N&&D(k,N),!0}return!1},v),T=V(g,2),w=T[0],y=T[1],b=f.useRef({cancel:function(){}}),P=f.useRef({cancel:function(){}});f.useEffect(function(){var C=nt(s),O=it(s);p.current!==P.current.element&&(P.current.cancel(),P.current.element=p.current,P.current.cancel=tt(p.current,w)),(h.current.element!==C||!rn(h.current.point,O))&&(w(),b.current.element!==C&&(b.current.cancel(),b.current.element=C,b.current.cancel=tt(C,w)))}),f.useEffect(function(){r?y():w()},[r]);var M=f.useRef(null);return f.useEffect(function(){a?M.current||(M.current=U(window,"resize",w)):M.current&&(M.current.remove(),M.current=null)},[a]),f.useEffect(function(){return function(){b.current.cancel(),P.current.cancel(),M.current&&M.current.remove(),y()}},[]),f.useImperativeHandle(t,function(){return{forceAlign:function(){return w(!0)}}}),f.isValidElement(c)&&(c=f.cloneElement(c,{ref:Oe(c.ref,p)})),c},ot=f.forwardRef(un);ot.displayName="Align";var rt=["measure","align",null,"motion"],ln=function(e,i){var t=f.useState(null),o=V(t,2),r=o[0],s=o[1],n=f.useRef(),u=f.useRef(!1);function a(h){u.current||s(h)}function l(){X.cancel(n.current)}function v(h){l(),n.current=X(function(){a(function(p){switch(r){case"align":return"motion";case"motion":return"stable"}return p}),h==null||h()})}return f.useEffect(function(){a("measure")},[e]),f.useEffect(function(){switch(r){case"measure":i();break}r&&(n.current=X(ht(De.mark(function h(){var p,c;return De.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=rt.indexOf(r),c=rt[p+1],c&&p!==-1&&a(c);case 3:case"end":return g.stop()}},h)}))))},[r]),f.useEffect(function(){return function(){u.current=!0,l()}},[]),[r,v]},cn=function(e){var i=f.useState({width:0,height:0}),t=V(i,2),o=t[0],r=t[1];function s(u){r({width:u.offsetWidth,height:u.offsetHeight})}var n=f.useMemo(function(){var u={};if(e){var a=o.width,l=o.height;e.indexOf("height")!==-1&&l?u.height=l:e.indexOf("minHeight")!==-1&&l&&(u.minHeight=l),e.indexOf("width")!==-1&&a?u.width=a:e.indexOf("minWidth")!==-1&&a&&(u.minWidth=a)}return u},[e,o]);return[n,s]},at=f.forwardRef(function(e,i){var t=e.visible,o=e.prefixCls,r=e.className,s=e.style,n=e.children,u=e.zIndex,a=e.stretch,l=e.destroyPopupOnHide,v=e.forceRender,h=e.align,p=e.point,c=e.getRootDomNode,d=e.getClassNameFromAlign,g=e.onAlign,T=e.onMouseEnter,w=e.onMouseLeave,y=e.onMouseDown,b=e.onTouchStart,P=f.useRef(),M=f.useRef(),C=f.useState(),O=V(C,2),E=O[0],D=O[1],k=cn(a),N=V(k,2),H=N[0],B=N[1];function Y(){a&&B(c())}var A=ln(t,Y),Me=V(A,2),W=Me[0],se=Me[1],ue=f.useRef();function ct(){return p||c}function xe(){var x;(x=P.current)===null||x===void 0||x.forceAlign()}function ft(x,L){if(W==="align"){var I=d(L);D(I),E!==I?Promise.resolve().then(function(){xe()}):se(function(){var z;(z=ue.current)===null||z===void 0||z.call(ue)}),g==null||g(x,L)}}var $=S({},Re(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(x){var L=$[x];$[x]=function(I,z){return se(),L==null?void 0:L(I,z)}});function Se(){return new Promise(function(x){ue.current=x})}f.useEffect(function(){!$.motionName&&W==="motion"&&se()},[$.motionName,W]),f.useImperativeHandle(i,function(){return{forceAlign:xe,getElement:function(){return M.current}}});var pt=S(S({},H),{},{zIndex:u,opacity:W==="motion"||W==="stable"||!t?void 0:0,pointerEvents:W==="stable"?void 0:"none"},s),Ee=!0;(h==null?void 0:h.points)&&(W==="align"||W==="stable")&&(Ee=!1);var ke=n;return f.Children.count(n)>1&&(ke=f.createElement("div",{className:"".concat(o,"-content")},n)),f.createElement(le,F({visible:t,ref:M,leavedClassName:"".concat(o,"-hidden")},$,{onAppearPrepare:Se,onEnterPrepare:Se,removeOnLeave:l,forceRender:v}),function(x,L){var I=x.className,z=x.style,dt=J(o,r,E,I);return f.createElement(ot,{target:ct(),key:"popup",ref:P,monitorWindowResize:!0,disabled:Ee,align:h,onAlign:ft},f.createElement("div",{ref:L,className:dt,onMouseEnter:T,onMouseLeave:w,onMouseDownCapture:y,onTouchStartCapture:b,style:S(S({},z),pt)},ke))})});at.displayName="PopupInner";var st=f.forwardRef(function(e,i){var t=e.prefixCls,o=e.visible,r=e.zIndex,s=e.children,n=e.mobile;n=n===void 0?{}:n;var u=n.popupClassName,a=n.popupStyle,l=n.popupMotion,v=l===void 0?{}:l,h=n.popupRender,p=f.useRef();f.useImperativeHandle(i,function(){return{forceAlign:function(){},getElement:function(){return p.current}}});var c=S({zIndex:r},a),d=s;return f.Children.count(s)>1&&(d=f.createElement("div",{className:"".concat(t,"-content")},s)),h&&(d=h(d)),f.createElement(le,F({visible:o,ref:p,removeOnLeave:!0},v),function(g,T){var w=g.className,y=g.style,b=J(t,u,w);return f.createElement("div",{ref:T,className:b,style:S(S({},y),c)},d)})});st.displayName="MobilePopupInner";var ut=f.forwardRef(function(e,i){var t=e.visible,o=e.mobile,r=mt(e,["visible","mobile"]),s=f.useState(t),n=V(s,2),u=n[0],a=n[1],l=f.useState(!1),v=V(l,2),h=v[0],p=v[1],c=S(S({},r),{},{visible:u});f.useEffect(function(){a(t),t&&o&&p(Ne())},[t,o]);var d=h?f.createElement(st,F({},c,{mobile:o,ref:i})):f.createElement(at,F({},c,{ref:i}));return f.createElement("div",null,f.createElement(Ot,c),d)});ut.displayName="Popup";var lt=f.createContext(null);function Pe(){}function fn(){return""}function pn(e){return e?e.ownerDocument:window.document}var dn=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function vn(e){var i=function(t){gt(r,t);var o=wt(r);function r(s){var n;yt(this,r),n=o.call(this,s),n.popupRef=f.createRef(),n.triggerRef=f.createRef(),n.onMouseEnter=function(a){var l=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",a),n.delaySetPopupVisible(!0,l,l?null:a)},n.onMouseMove=function(a){n.fireEvents("onMouseMove",a),n.setPoint(a)},n.onMouseLeave=function(a){n.fireEvents("onMouseLeave",a),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onPopupMouseEnter=function(){n.clearDelayTimer()},n.onPopupMouseLeave=function(a){var l;a.relatedTarget&&!a.relatedTarget.setTimeout&&Z((l=n.popupRef.current)===null||l===void 0?void 0:l.getElement(),a.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onFocus=function(a){n.fireEvents("onFocus",a),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))},n.onMouseDown=function(a){n.fireEvents("onMouseDown",a),n.preClickTime=Date.now()},n.onTouchStart=function(a){n.fireEvents("onTouchStart",a),n.preTouchTime=Date.now()},n.onBlur=function(a){n.fireEvents("onBlur",a),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)},n.onContextMenu=function(a){a.preventDefault(),n.fireEvents("onContextMenu",a),n.setPopupVisible(!0,a)},n.onContextMenuClose=function(){n.isContextMenuToShow()&&n.close()},n.onClick=function(a){if(n.fireEvents("onClick",a),n.focusTime){var l;if(n.preClickTime&&n.preTouchTime?l=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?l=n.preClickTime:n.preTouchTime&&(l=n.preTouchTime),Math.abs(l-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&a&&a.preventDefault&&a.preventDefault();var v=!n.state.popupVisible;(n.isClickToHide()&&!v||v&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,a)},n.onPopupMouseDown=function(){if(n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout(function(){n.hasPopupMouseDown=!1},0),n.context){var a;(a=n.context).onPopupMouseDown.apply(a,arguments)}},n.onDocumentClick=function(a){if(!(n.props.mask&&!n.props.maskClosable)){var l=a.target,v=n.getRootDomNode(),h=n.getPopupDomNode();(!Z(v,l)||n.isContextMenuOnly())&&!Z(h,l)&&!n.hasPopupMouseDown&&n.close()}},n.getRootDomNode=function(){var a=n.props.getTriggerDOMNode;if(a)return a(n.triggerRef.current);try{var l=bt(n.triggerRef.current);if(l)return l}catch(v){}return ce.findDOMNode(Tt(n))},n.getPopupClassNameFromAlign=function(a){var l=[],v=n.props,h=v.popupPlacement,p=v.builtinPlacements,c=v.prefixCls,d=v.alignPoint,g=v.getPopupClassNameFromAlign;return h&&p&&l.push(kt(p,c,a,d)),g&&l.push(g(a)),l.join(" ")},n.getComponent=function(){var a=n.props,l=a.prefixCls,v=a.destroyPopupOnHide,h=a.popupClassName,p=a.onPopupAlign,c=a.popupMotion,d=a.popupAnimation,g=a.popupTransitionName,T=a.popupStyle,w=a.mask,y=a.maskAnimation,b=a.maskTransitionName,P=a.maskMotion,M=a.zIndex,C=a.popup,O=a.stretch,E=a.alignPoint,D=a.mobile,k=a.forceRender,N=n.state,H=N.popupVisible,B=N.point,Y=n.getPopupAlign(),A={};return n.isMouseEnterToShow()&&(A.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(A.onMouseLeave=n.onPopupMouseLeave),A.onMouseDown=n.onPopupMouseDown,A.onTouchStart=n.onPopupMouseDown,f.createElement(ut,F({prefixCls:l,destroyPopupOnHide:v,visible:H,point:E&&B,className:h,align:Y,onAlign:p,animation:d,getClassNameFromAlign:n.getPopupClassNameFromAlign},A,{stretch:O,getRootDomNode:n.getRootDomNode,style:T,mask:w,zIndex:M,transitionName:g,maskAnimation:y,maskTransitionName:b,maskMotion:P,ref:n.popupRef,motion:c,mobile:D,forceRender:k}),typeof C=="function"?C():C)},n.attachParent=function(a){X.cancel(n.attachId);var l=n.props,v=l.getPopupContainer,h=l.getDocument,p=n.getRootDomNode(),c;v?(p||v.length===0)&&(c=v(p)):c=h(n.getRootDomNode()).body,c?c.appendChild(a):n.attachId=X(function(){n.attachParent(a)})},n.getContainer=function(){var a=n.props.getDocument,l=a(n.getRootDomNode()).createElement("div");return l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.width="100%",n.attachParent(l),l},n.setPoint=function(a){var l=n.props.alignPoint;!l||!a||n.setState({point:{pageX:a.pageX,pageY:a.pageY}})},n.handlePortalUpdate=function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)};var u;return"popupVisible"in s?u=!!s.popupVisible:u=!!s.defaultPopupVisible,n.state={prevPopupVisible:u,popupVisible:u},dn.forEach(function(a){n["fire".concat(a)]=function(l){n.fireEvents(a,l)}}),n}return Ct(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var n=this.props,u=this.state;if(u.popupVisible){var a;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(a=n.getDocument(this.getRootDomNode()),this.clickOutsideHandler=U(a,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(a=a||n.getDocument(this.getRootDomNode()),this.touchOutsideHandler=U(a,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(a=a||n.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=U(a,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=U(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),X.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var n;return((n=this.popupRef.current)===null||n===void 0?void 0:n.getElement())||null}},{key:"getPopupAlign",value:function(){var n=this.props,u=n.popupPlacement,a=n.popupAlign,l=n.builtinPlacements;return u&&l?Et(l,u,a):a}},{key:"setPopupVisible",value:function(n,u){var a=this.props.alignPoint,l=this.state.popupVisible;this.clearDelayTimer(),l!==n&&("popupVisible"in this.props||this.setState({popupVisible:n,prevPopupVisible:l}),this.props.onPopupVisibleChange(n)),a&&u&&n&&this.setPoint(u)}},{key:"delaySetPopupVisible",value:function(n,u,a){var l=this,v=u*1e3;if(this.clearDelayTimer(),v){var h=a?{pageX:a.pageX,pageY:a.pageY}:null;this.delayTimer=window.setTimeout(function(){l.setPopupVisible(n,h),l.clearDelayTimer()},v)}else this.setPopupVisible(n,a)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(n){var u=this.props.children.props,a=this.props;return u[n]&&a[n]?this["fire".concat(n)]:u[n]||a[n]}},{key:"isClickToShow",value:function(){var n=this.props,u=n.action,a=n.showAction;return u.indexOf("click")!==-1||a.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var n=this.props.action;return n==="contextMenu"||n.length===1&&n[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var n=this.props,u=n.action,a=n.showAction;return u.indexOf("contextMenu")!==-1||a.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var n=this.props,u=n.action,a=n.hideAction;return u.indexOf("click")!==-1||a.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var n=this.props,u=n.action,a=n.showAction;return u.indexOf("hover")!==-1||a.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var n=this.props,u=n.action,a=n.hideAction;return u.indexOf("hover")!==-1||a.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var n=this.props,u=n.action,a=n.showAction;return u.indexOf("focus")!==-1||a.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var n=this.props,u=n.action,a=n.hideAction;return u.indexOf("focus")!==-1||a.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var n;(n=this.popupRef.current)===null||n===void 0||n.forceAlign()}}},{key:"fireEvents",value:function(n,u){var a=this.props.children.props[n];a&&a(u);var l=this.props[n];l&&l(u)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var n=this.state.popupVisible,u=this.props,a=u.children,l=u.forceRender,v=u.alignPoint,h=u.className,p=u.autoDestroy,c=f.Children.only(a),d={key:"trigger"};this.isContextMenuToShow()?d.onContextMenu=this.onContextMenu:d.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(d.onClick=this.onClick,d.onMouseDown=this.onMouseDown,d.onTouchStart=this.onTouchStart):(d.onClick=this.createTwoChains("onClick"),d.onMouseDown=this.createTwoChains("onMouseDown"),d.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(d.onMouseEnter=this.onMouseEnter,v&&(d.onMouseMove=this.onMouseMove)):d.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?d.onMouseLeave=this.onMouseLeave:d.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(d.onFocus=this.onFocus,d.onBlur=this.onBlur):(d.onFocus=this.createTwoChains("onFocus"),d.onBlur=this.createTwoChains("onBlur"));var g=J(c&&c.props&&c.props.className,h);g&&(d.className=g);var T=S({},d);Pt(c)&&(T.ref=Oe(this.triggerRef,c.ref));var w=f.cloneElement(c,T),y;return(n||this.popupRef.current||l)&&(y=f.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&p&&(y=null),f.createElement(lt.Provider,{value:{onPopupMouseDown:this.onPopupMouseDown}},w,y)}}],[{key:"getDerivedStateFromProps",value:function(n,u){var a=n.popupVisible,l={};return a!==void 0&&u.popupVisible!==a&&(l.popupVisible=a,l.prevPopupVisible=u.popupVisible),l}}]),r}(f.Component);return i.contextType=lt,i.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:fn,getDocument:pn,onPopupVisibleChange:Pe,afterPopupVisibleChange:Pe,onPopupAlign:Pe,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},i}var hn=vn(Mt);export{hn as T,Ne as i};
