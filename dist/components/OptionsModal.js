import s from"../../_snowpack/pkg/antd/es/button.js";import w from"../../_snowpack/pkg/antd/es/space.js";import r from"../../_snowpack/pkg/antd/es/row.js";import o from"../../_snowpack/pkg/antd/es/col.js";import S from"../../_snowpack/pkg/antd/es/modal.js";import e,{useEffect as T,useState as y}from"../../_snowpack/pkg/react.js";import{commandState as x,optionElementState as I,useableOptionType as _}from"../recoil/index.js";import{useRecoilState as b,useRecoilValue as $}from"../../_snowpack/pkg/recoil.js";import{ApplicationCommandOptionType as a}from"../slash/ApplicationCommand.js";import u from"../icons/index.js";import h from"./options/Option.js";import z from"./options/SubCommand.js";import G from"./options/SubCommandGroup.js";import A from"../helpers/keyofEnum.js";function M(){const[f,j]=y(!1);T(()=>{j(!0)},[f]);const[l,g]=y(!1);function k(){g(!l)}const[m,p]=b(I),[E,O]=b(x);function c(t){const n=Date.now();switch(parseInt(t.currentTarget.id)){case a.SubCommand:p([...m,e.createElement(z,{key:`${a[parseInt(t.currentTarget.id)]}Option-${n}`,type:parseInt(t.currentTarget.id),index:n,inGroup:!1})]);break;case a.SubCommandGroup:p([...m,e.createElement(G,{key:`${a[parseInt(t.currentTarget.id)]}Option-${n}`,type:parseInt(t.currentTarget.id),index:n,inGroup:!1})]);break;default:p([...m,e.createElement(h,{key:`${a[parseInt(t.currentTarget.id)]}Option-${n}`,type:parseInt(t.currentTarget.id),index:n})]);break}E.options||O({...E,options:[]}),g(!l)}const d=A(a),C=d.splice(0,2),i=$(_);return e.createElement(e.Fragment,null,e.createElement(s,{type:"primary",size:"large",loading:!f,onClick:k},"Add Option"),e.createElement(S,{centered:!0,title:"Add Option",visible:l,onCancel:k,footer:null},e.createElement(w,{size:24,direction:"vertical",style:{width:"100%"}},e.createElement(r,{gutter:12,justify:"space-around",align:"middle"},d.splice(0,4).map((t,n)=>e.createElement(o,{flex:"auto",key:n},e.createElement(s,{key:t,id:a[t],onClick:c,size:"large",disabled:i?i!=="Option":!1},e.createElement(r,{gutter:6,align:"middle",justify:"space-around"},e.createElement(o,null,u[t]),e.createElement(o,null,t)))))),e.createElement(r,{gutter:12,justify:"space-around",align:"middle"},d.map((t,n)=>e.createElement(o,{flex:"auto",key:n},e.createElement(s,{key:t,id:a[t],onClick:c,size:"large",disabled:i?i!=="Option":!1},e.createElement(r,{gutter:6,align:"middle",justify:"space-around"},e.createElement(o,null,u[t]),e.createElement(o,null,t)))))),e.createElement(r,{gutter:12,justify:"space-around",align:"middle"},C.map((t,n)=>e.createElement(o,{flex:"auto",key:n},e.createElement(s,{key:t,id:a[t],onClick:c,size:"large",disabled:i?i!==t:!1},e.createElement(r,{gutter:6,align:"middle",justify:"space-around"},e.createElement(o,null,u[t]),e.createElement(o,null,t)))))))))}export default M;
