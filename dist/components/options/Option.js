import{ApplicationCommandOptionType as c}from"../../slash/ApplicationCommand.js";import R from"../../../_snowpack/pkg/antd/es/button.js";import k from"../../../_snowpack/pkg/antd/es/space.js";import l from"../../../_snowpack/pkg/antd/es/row.js";import a from"../../../_snowpack/pkg/antd/es/col.js";import q from"../../../_snowpack/pkg/antd/es/card.js";import C from"../../../_snowpack/pkg/antd/es/switch.js";import I from"../../../_snowpack/pkg/antd/es/typography.js";import e,{useEffect as g,useState as E}from"../../../_snowpack/pkg/react.js";import{commandState as T,optionElementState as v}from"../../recoil/index.js";import u from"./GenericInput.js";import A from"../../icons/index.js";import{useRecoilState as y}from"../../../_snowpack/pkg/recoil.js";function G({type:i,index:j,inSubCommand:r,offset:w,deleter:m,updater:f}){const[t,s]=E({key:`${c[i]}Option-${j}`,type:i,name:"",description:"",required:!1}),[o,d]=y(T);g(()=>{r&&f&&f(t),!r&&o.options&&d({...o,options:[...o.options.filter(n=>n.key!==t.key),t]})},[t]);const[p,_]=E(!1);g(()=>{s({...t,required:p})},[p]);const[h,O]=y(v);function x(){r&&m&&m(t.key??""),!r&&o.options&&(d({...o,options:o.options.filter(n=>n.key!==t.key)}),O(h.filter(n=>n.key!==t.key)))}return e.createElement(q,{title:e.createElement(e.Fragment,null,e.createElement(l,{gutter:16,align:"middle",justify:"start"},e.createElement(a,null,A[c[i]]),e.createElement(a,null,c[i]))),bordered:!1,style:r?{marginLeft:w||"20px"}:{}},e.createElement(k,{direction:"vertical",style:{width:"100%"}},e.createElement(u,{name:"name",setter:[t,s]}),e.createElement(u,{name:"description",setter:[t,s]}),e.createElement(l,null,e.createElement(a,{span:6},e.createElement(I.Title,{level:5},"Required?"),e.createElement(C,{checked:p,onChange:n=>_(n)})),e.createElement(a,{flex:"auto"},e.createElement(l,{align:"middle",justify:"end"},e.createElement(k,{align:"center"},e.createElement(R,{danger:!0,type:"primary",size:"large",onClick:x},"Delete")))))))}export default G;
